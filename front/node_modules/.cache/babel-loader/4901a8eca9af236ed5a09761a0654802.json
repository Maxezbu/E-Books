{"ast":null,"code":"var _jsxFileName = \"/home/buru/resguardo/ebooks/front/src/components/Navbar.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { setSearch } from \"../state/search\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppBar, Toolbar, Typography, Badge, MenuItem, Menu, IconButton } from \"@material-ui/core\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\nimport useStyles from \"../utils/stylesNavbar\";\nimport MenuCategorias from \"../components/MenuCategorias\";\nimport { setCategorias } from \"../state/categorias\";\nimport Search from \"./Search\"; // importo el nuevo modulo.\n\nimport { Route, useLocation } from \"react-router-dom\"; // importo Route para renderizar el modulo.\n\nimport AdminMenu from \"./AdminMenu\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Navbar({\n  changeMode\n}) {\n  _s();\n\n  const token = localStorage.getItem(\"token\");\n  const nombreUsuario = localStorage.getItem(\"user\");\n  const isAdmin = localStorage.getItem(\"isAdmin\");\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n  const categorias = useSelector(state => state.categorias);\n  const history = useHistory();\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n  const dispatch = useDispatch();\n\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = event => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const handleLogInOrOut = () => {\n    handleMenuClose();\n\n    if (!nombreUsuario && !token) {\n      history.push(\"/login\");\n    }\n\n    if (nombreUsuario) {\n      handleMenuClose();\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"isAdmin\");\n      localStorage.removeItem(\"userId\");\n      localStorage.removeItem(\"book\");\n      history.push(\"/\");\n    }\n  };\n\n  const handleRegister = () => {\n    if (nombreUsuario) {\n      history.push(\"/profile\");\n    } else {\n      history.push(\"/register\");\n    }\n  };\n\n  const menuId = \"primary-search-account-menu\";\n\n  const renderMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    id: menuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: isMenuOpen,\n    onClose: handleMenuClose,\n    children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleLogInOrOut,\n      children: token ? \"Logout\" : \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleRegister,\n      children: nombreUsuario ? null : \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n\n  const mobileMenuId = \"primary-search-account-menu-mobile\";\n\n  const renderMobileMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: mobileMoreAnchorEl,\n    anchorOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    id: mobileMenuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: \"top\",\n      horizontal: \"right\"\n    },\n    open: isMobileMenuOpen,\n    onClose: handleMobileMenuClose,\n    children: /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleProfileMenuOpen,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"account of current user\",\n        \"aria-controls\": \"primary-search-account-menu\",\n        \"aria-haspopup\": \"true\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Perfil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n\n  useEffect(() => {\n    axios.get(\"/api/categorias\").then(res => res.data).then(data => dispatch(setCategorias(data)));\n  }, []);\n  const location = useLocation();\n\n  const handleClick = () => {\n    dispatch(setSearch());\n    return history.push(\"/\");\n  };\n  /* const carritoCompra = () => {\n    let userId = localStorage.getItem(\"userId\");\n    let carritoCompras = JSON.parse(localStorage.getItem(\"book\"))\n    if (userId) {\n      if(carritoCompras){\n        dispatch(setCarritoLogin(userId, carritoCompras))\n      }\n      return axios.post(\"/api/carrito\", { userId }).then((res) => {\n        dispatch(setCarrito(res.data.producto));\n        history.push(\"/shop\");\n      });\n    }\n    if (!userId) {\n      alert(\"me estoy ejecutando necesitas loguearte\")\n      dispatch(setCarrito(JSON.parse(localStorage.getItem(\"book\"))));\n      history.push(\"/shop\");\n    }\n  }; */\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: location.pathname === \"/login\" || location.pathname === \"/register\" ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.grow,\n      children: [/*#__PURE__*/_jsxDEV(AppBar, {\n        position: \"static\",\n        children: /*#__PURE__*/_jsxDEV(Toolbar, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            className: classes.title,\n            variant: \"h6\",\n            noWrap: true,\n            color: \"initial\",\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"go to home\",\n              color: \"inherit\",\n              style: {\n                padding: 20\n              },\n              onClick: () => handleClick(),\n              children: \"EBooks\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.search,\n            children: /*#__PURE__*/_jsxDEV(Route, {\n              render: ({\n                history\n              }) => /*#__PURE__*/_jsxDEV(Search, {\n                history: history\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 49\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MenuCategorias, {\n            categorias: categorias\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.grow\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 15\n          }, this), isAdmin == \"true\" ? /*#__PURE__*/_jsxDEV(AdminMenu, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 36\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.sectionDesktop,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              className: classes.title,\n              variant: \"h4\",\n              noWrap: true,\n              style: {\n                padding: 10\n              },\n              color: \"inherit\",\n              children: nombreUsuario\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"show  new notifications\",\n              color: \"inherit\",\n              style: {\n                padding: 20\n              },\n              onClick: changeMode,\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                badgeContent: 0,\n                color: \"secondary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Brightness4Icon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/shop\",\n              style: {\n                color: \"inherit\"\n              },\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"show  new notifications\",\n                color: \"inherit\",\n                style: {\n                  padding: 20\n                },\n                children: [/*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: 0,\n                  color: \"secondary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"account of current user\",\n              \"aria-controls\": menuId,\n              \"aria-haspopup\": \"true\",\n              onClick: handleProfileMenuOpen,\n              color: \"inherit\",\n              children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.sectionMobile,\n            children: /*#__PURE__*/_jsxDEV(IconButton, {\n              \"aria-label\": \"show more\",\n              \"aria-controls\": mobileMenuId,\n              \"aria-haspopup\": \"true\",\n              onClick: handleMobileMenuOpen,\n              color: \"inherit\",\n              children: /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this), renderMobileMenu, renderMenu]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(Navbar, \"WSFQfJ/FrCOiS0HcVfPNQWxt6U8=\", false, function () {\n  return [useStyles, useSelector, useHistory, useDispatch, useLocation];\n});\n\n_c = Navbar;\n\nvar _c;\n\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"sources":["/home/buru/resguardo/ebooks/front/src/components/Navbar.jsx"],"names":["React","useEffect","useState","axios","useHistory","Link","setSearch","useDispatch","useSelector","AppBar","Toolbar","Typography","Badge","MenuItem","Menu","IconButton","AccountCircle","MoreIcon","ShoppingCartIcon","Brightness4Icon","useStyles","MenuCategorias","setCategorias","Search","Route","useLocation","AdminMenu","Navbar","changeMode","token","localStorage","getItem","nombreUsuario","isAdmin","classes","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","categorias","state","history","isMenuOpen","Boolean","isMobileMenuOpen","dispatch","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","handleMobileMenuOpen","handleLogInOrOut","push","removeItem","handleRegister","menuId","renderMenu","vertical","horizontal","mobileMenuId","renderMobileMenu","get","then","res","data","location","handleClick","pathname","grow","title","padding","search","sectionDesktop","color","sectionMobile"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { setSearch } from \"../state/search\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Badge,\n  MenuItem,\n  Menu,\n  IconButton,\n} from \"@material-ui/core\";\n\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport MoreIcon from \"@material-ui/icons/MoreVert\";\nimport ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport Brightness4Icon from \"@material-ui/icons/Brightness4\";\n\nimport useStyles from \"../utils/stylesNavbar\";\nimport MenuCategorias from \"../components/MenuCategorias\";\nimport { setCategorias } from \"../state/categorias\";\n\nimport Search from \"./Search\"; // importo el nuevo modulo.\n\nimport { Route, useLocation } from \"react-router-dom\"; // importo Route para renderizar el modulo.\n\nimport AdminMenu from \"./AdminMenu\";\n\nexport default function Navbar({ changeMode }) {\n  const token = localStorage.getItem(\"token\");\n  const nombreUsuario = localStorage.getItem(\"user\");\n  const isAdmin = localStorage.getItem(\"isAdmin\");\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\n\n  const categorias = useSelector((state) => state.categorias);\n\n  const history = useHistory();\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n\n  const dispatch = useDispatch();\n\n  const handleProfileMenuOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = (event) => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const handleLogInOrOut = () => {\n    handleMenuClose();\n    if (!nombreUsuario && !token) {\n      history.push(\"/login\");\n    }\n    if (nombreUsuario) {\n      handleMenuClose();\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"user\");\n      localStorage.removeItem(\"isAdmin\");\n      localStorage.removeItem(\"userId\");\n      localStorage.removeItem(\"book\");\n      history.push(\"/\");\n    }\n  };\n\n  const handleRegister = () => {\n    if (nombreUsuario) {\n      history.push(\"/profile\");\n    } else {\n      history.push(\"/register\");\n    }\n  };\n\n  const menuId = \"primary-search-account-menu\";\n  const renderMenu = (\n    <Menu\n      anchorEl={anchorEl}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      id={menuId}\n      keepMounted\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      open={isMenuOpen}\n      onClose={handleMenuClose}\n    >\n      <MenuItem onClick={handleLogInOrOut}>\n        {token ? \"Logout\" : \"Login\"}\n      </MenuItem>\n      <MenuItem onClick={handleRegister}>\n        {nombreUsuario ? null : \"Register\"}\n      </MenuItem>\n      {/* <MenuItem onClick={handleMenuClose}>My account</MenuItem> */}\n    </Menu>\n  );\n\n  const mobileMenuId = \"primary-search-account-menu-mobile\";\n  const renderMobileMenu = (\n    <Menu\n      anchorEl={mobileMoreAnchorEl}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      id={mobileMenuId}\n      keepMounted\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\n      open={isMobileMenuOpen}\n      onClose={handleMobileMenuClose}\n    >\n      <MenuItem onClick={handleProfileMenuOpen}>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"primary-search-account-menu\"\n          aria-haspopup=\"true\"\n          color=\"inherit\"\n        >\n          {/* {nombreUsuario ? (\n            <Avatar alt=\"Remy Sharp\" src=\"cata.jpg\" />\n          ) : (\n            <AccountCircle />\n          )} */}\n          <AccountCircle />\n        </IconButton>\n        <p>Perfil</p>\n      </MenuItem>\n    </Menu>\n  );\n\n  useEffect(() => {\n    axios\n      .get(\"/api/categorias\")\n      .then((res) => res.data)\n      .then((data) => dispatch(setCategorias(data)));\n  }, []);\n  const location = useLocation();\n\n  const handleClick = () => {\n    dispatch(setSearch());\n    return history.push(\"/\");\n  };\n\n  /* const carritoCompra = () => {\n    let userId = localStorage.getItem(\"userId\");\n    let carritoCompras = JSON.parse(localStorage.getItem(\"book\"))\n    if (userId) {\n      if(carritoCompras){\n        dispatch(setCarritoLogin(userId, carritoCompras))\n      }\n      return axios.post(\"/api/carrito\", { userId }).then((res) => {\n        dispatch(setCarrito(res.data.producto));\n        history.push(\"/shop\");\n      });\n    }\n    if (!userId) {\n      alert(\"me estoy ejecutando necesitas loguearte\")\n      dispatch(setCarrito(JSON.parse(localStorage.getItem(\"book\"))));\n      history.push(\"/shop\");\n    }\n  }; */\n\n  return (\n    <>\n      {location.pathname === \"/login\" ||\n      location.pathname === \"/register\" ? null : (\n        <div className={classes.grow}>\n          <AppBar position=\"static\">\n            <Toolbar>\n              {/* <IconButton\n                edge=\"start\"\n                className={classes.menuButton}\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n              >\n                <img src=\"logo.png\" alt=\"logo\" className={classes.logo} />\n              </IconButton> */}\n\n              <Typography\n                className={classes.title}\n                variant=\"h6\"\n                noWrap\n                color=\"initial\"\n              >\n                <IconButton\n                  aria-label=\"go to home\"\n                  color=\"inherit\"\n                  style={{ padding: 20 }}\n                  onClick={() => handleClick()}\n                >\n                  EBooks\n                </IconButton>\n              </Typography>\n\n              <div className={classes.search}>\n                <Route render={({ history }) => <Search history={history} />} />\n              </div>\n              <MenuCategorias categorias={categorias} />\n              <div className={classes.grow} />\n              {isAdmin == \"true\" ? <AdminMenu /> : null}\n\n              <div className={classes.sectionDesktop}>\n                <Typography\n                  className={classes.title}\n                  variant=\"h4\"\n                  noWrap\n                  style={{ padding: 10 }}\n                  color=\"inherit\"\n                >\n                  {nombreUsuario}\n                </Typography>\n                <IconButton\n                  aria-label=\"show  new notifications\"\n                  color=\"inherit\"\n                  style={{ padding: 20 }}\n                  onClick={changeMode}\n                >\n                  <Badge badgeContent={0} color=\"secondary\"></Badge>\n                  <Brightness4Icon />\n                </IconButton>\n                <Link to=\"/shop\" style={{ color: \"inherit\" }}>\n                  <IconButton\n                    aria-label=\"show  new notifications\"\n                    color=\"inherit\"\n                    style={{ padding: 20 }}\n                  >\n                    <Badge badgeContent={0} color=\"secondary\"></Badge>\n                    <ShoppingCartIcon />\n                  </IconButton>\n                </Link>\n                <IconButton\n                  edge=\"end\"\n                  aria-label=\"account of current user\"\n                  aria-controls={menuId}\n                  aria-haspopup=\"true\"\n                  onClick={handleProfileMenuOpen}\n                  color=\"inherit\"\n                >\n                  {/* {nombreUsuario ? (\n                    <Avatar alt=\"Remy Sharp\" src=\"cata.jpeg\" />\n                  ) : (\n                    <AccountCircle />\n                  )} */}\n                  <AccountCircle />\n                </IconButton>\n              </div>\n              <div className={classes.sectionMobile}>\n                <IconButton\n                  aria-label=\"show more\"\n                  aria-controls={mobileMenuId}\n                  aria-haspopup=\"true\"\n                  onClick={handleMobileMenuOpen}\n                  color=\"inherit\"\n                >\n                  <MoreIcon />\n                </IconButton>\n              </div>\n            </Toolbar>\n          </AppBar>\n          {renderMobileMenu}\n          {renderMenu}\n        </div>\n      )}\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}